<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create Vanted-jar" name="Create Runnable Jar for Project IPK-Plugins">
    <!--ANT 1.7 is required -->
    <target name="create Vanted-jar">
    	<!-- create vanted-jarfile -->
        <jar destfile="vanted_with_doublettes.jar" filesetmanifest="mergewithoutmain">
            <manifest>
                <attribute name="Built-By" value="${user.name}"/>
                <attribute name="Main-Class" value="de.ipk_gatersleben.ag_nw.graffiti.plugins.gui.webstart.Main"/>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="../Graffiti_Core/build/classes"/>
            <fileset dir="../Graffiti_Editor/build/classes"/>
            <fileset dir="../Graffiti_Plugins/build/classes"/>
            <fileset dir="../IPK_lib/build"/>
            <fileset dir="../IPK-Plugins/build/classes"/>
        	<zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/commons-beanutils.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/commons-digester.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/jdom.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/java-cup-v11a-runtime.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/jh.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/commons-logging-1.1.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/commons-collections-3.1.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/activation.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/axis.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-awt-util.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-bridge.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-css.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-dom.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-ext.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-gvt.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-parser.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-rasterizer.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-script.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-svg-dom.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-svggen.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-transcoder.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-util.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-xml.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/bsh-2.0b4.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/commons-cli-1.0.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/commons-discovery.jar"/>
<!--         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/commons-math-1.0.jar"/> -->
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/commons-net-2.0.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/commons-net-ftp-2.0.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/dom4j-1.6.1.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/itext-1.4.5.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/jaxen-full.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/jaxrpc.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/jcommon-0.9.5.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/jruby.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/keggapi.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/mail.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/optional.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/parser.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/pdf-transcoder.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/rome-0.8.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/saaj.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/saxpath.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/secondstring-20030401.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/soap.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/vecmath1.2-1.14.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/wsdl4j.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/xercesImpl.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/xmlParserAPIs.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/poi-3.7-20101029.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/poi-ooxml-schemas-3.7-20101029.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/junit-3.8.1.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/log4j-1.2.13.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/xbean.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/jlex_java_cup.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/batik-anim.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/poi-ooxml-3.7-20101029.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/poi-scratchpad-3.7-20101029.jar"/>
        	<!-- new libs for v2.1 -->
        	<!-- loading of gpml -->
     		<zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/org.bridgedb.bio.jar"/>
         <zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/resources.jar"/>
       	<zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/org.bridgedb.jar"/>
       	<zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/pathvisio.jar"/>
       	<zipfileset excludes="META-INF/*.SF" src="../Graffiti_lib/wikipathways-client.jar"/> 
			<!-- is neded for the wikipathways access -->
      	 <zipfileset excludes="META-INF/*.SF" src="./lib/axis-ant.jar"/>
      	<zipfileset excludes="META-INF/*.SF" src="./lib/axis.jar"/>
      	<zipfileset excludes="META-INF/*.SF" src="./lib/commons-discovery-0.2.jar"/>
      	<zipfileset excludes="META-INF/*.SF" src="./lib/commons-logging-1.0.4.jar"/>
      	<zipfileset excludes="META-INF/*.SF" src="./lib/derby.jar"/>
      	<zipfileset excludes="META-INF/*.SF" src="./lib/jaxrpc.jar"/>
      	<zipfileset excludes="META-INF/*.SF" src="./lib/log4j-1.2.8.jar"/>
      	<zipfileset excludes="META-INF/*.SF" src="./lib/saaj.jar"/>
      	<zipfileset excludes="META-INF/*.SF" src="./lib/wsdl4j-1.5.1.jar"/>      	
        </jar>
    	<!-- get rid of double-entries such as "license.txt", needed for signing -->
    	<unzip src="vanted_with_doublettes.jar" dest="vanted_temp" />
    	<delete file="vanted_with_doublettes.jar"/>
    	<zip destfile="vanted.jar" basedir="vanted_temp" />
      <delete dir="vanted_temp"/>
    	<zip destfile="vanted.zip" >
    		<fileset file="zip/README.TXT" />
    		<fileset file="zip/startVanted.sh" />
    		<fileset file="zip/startVantedLinuxAutoMem.sh" />
    		<fileset file="zip/startVanted.cmd" />
    		<fileset file="vanted.jar" />
    	</zip>    	
    </target>
</project>
